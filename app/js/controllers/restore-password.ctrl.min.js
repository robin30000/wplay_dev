(function(){"use strict";angular.module("app").controller("restorePasswordController",restorePasswordController);restorePasswordController.$inject=["$scope","$routeParams","AuthService","growl","$timeout","$location","vcRecaptchaService","REST"];function restorePasswordController($scope,$routeParams,AuthService,growl,$timeout,$location,vcRecaptchaService,REST){var vm=this;vm.model={key:REST.KEY};vm.setResponse=function(response){vm.response=response};vm.setWidgetId=function(widgetId){vm.widgetId=widgetId};vm.cbExpiration=function(){vcRecaptchaService.reload(vm.widgetId);vm.response=null};function validateCaptcha(){Utils.validateCaptcha(vm.captcha).then(complete).catch(failed);function complete(data){}function failed(data){console.log(data)}}var mail=$routeParams.mail;vm.submit=function(){var captcha=vcRecaptchaService.getResponse();AuthService.restorePassword(mail,vm.new,vm.confirm,captcha).then(complete).catch(failed);function complete(data){var config={};if(data.state==1){growl.success(data.msg,config);$timeout(function(){$location.path("/restaura-contrasena")},5e3)}else{growl.error(data.msg,config)}}function failed(data){console.log(data)}}}})();
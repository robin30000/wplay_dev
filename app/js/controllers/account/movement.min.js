(function(){"use strict";angular.module("app").controller("movementController",movementController);movementController.$inject=["$rootScope","$scope","$routeParams","$location","i18nService","GameAccount"];function movementController($rootScope,$scope,$routeParams,$location,i18nService,GameAccount){var vm=this;vm.activeTab=$routeParams.paramId;vm.items=["Saldos","Depositos","Apuestas","Doc. de retiro pendientes","Doc. de retiro pagados","Doc. de retiro cancelados","Ajustes por entrada","Ajustes por salida","Saldo discriminado"];vm.currentTitle=vm.items[vm.activeTab-1];vm.gridOptionsBalance={};vm.gridOptionsDeposit={};vm.gridOptionsBet={};vm.gridOptionsPendingDocs={};vm.gridOptionsPaidDocs={};vm.gridOptionsCancelDocs={};vm.gridOptionsIncome={};vm.gridOptionsOutcome={};vm.gridOptionsBalanceDetail={};init();function init(){switch(parseInt(vm.activeTab)){case 1:getBalance();break;case 2:getDeposit();break;case 3:getBets();break;case 4:getPendingDocs();break;case 5:getPaidDocs();break;case 6:getCancelDocs();break;case 7:getIncome();break;case 8:getOutcome();break;case 9:getBalanceDetail();break}}vm.selectTab=function selectTab(tab){vm.activeTab=tab;changePath(tab);vm.currentTitle=vm.items[tab-1]};function changePath(newId){var urlPath=$location.path();urlPath=urlPath.substr(1,urlPath.lastIndexOf("/"));$location.path(urlPath+newId)}function getBalance(){var columnDefs=[{name:"Saldo premios",field:"saldo",cellFilter:'currency:"$":0'},{name:"Saldo créditos",field:"saldo_total",cellFilter:'currency:"$":0'},{name:"Saldo bonos",field:"saldo_bono",cellFilter:'currency:"$":0'}];vm.gridOptionsBalance={columnDefs:columnDefs};GameAccount.getDataGrid($rootScope.id,$rootScope.tokenSession,"saldo").then(complete).catch(failed);function complete(data){vm.gridOptionsBalance.data=data}function failed(){}}function getDeposit(){var columnDefs=[{name:"# Deposito",field:"recarga_id"},{name:"Punto de venta",field:"descripcion"},{name:"Valor",field:"valor",cellFilter:'currency:"$":0'},{name:"Fecha",field:"fecha_crea"}];vm.gridOptionsDeposit={paginationPageSizes:[10,25,50,75],paginationPageSize:10,columnDefs:columnDefs};GameAccount.getDataGrid($rootScope.id,$rootScope.tokenSession,"deposito").then(complete).catch(failed);function complete(data){vm.gridOptionsDeposit.data=data}function failed(){}}function getBets(){var columnDefs=[{name:"Número de apuesta",field:"ticket_id"},{name:"Valor",field:"vlr_apuesta",cellFilter:'currency:"$":0'},{name:"Fecha creación",field:"fecha_crea"},{name:"Hora creación",field:"hora_crea"},{name:"Estado",field:"bet_status"},{name:"Valor premio",field:"valor_premio",cellFilter:'currency:"$":0'}];vm.gridOptionsBet={paginationPageSizes:[10,25,50,75],paginationPageSize:10,columnDefs:columnDefs};GameAccount.getDataGrid($rootScope.id,$rootScope.tokenSession,"apuesta").then(complete).catch(failed);function complete(data){vm.gridOptionsBet.data=data}function failed(){}}function getPendingDocs(){var columnDefs=[{name:"Número documento de retiro",field:"numero_fact"},{name:"Fecha",field:"fecha_crea"},{name:"Medio de Pago",field:"medio_pago"},{name:"Valor bruto",field:"valor_bruto",cellFilter:'currency:"$":0'},{name:"Descuento",field:"valor_retencion",cellFilter:'currency:"$":0'},{name:"Valor neto",field:"valor",cellFilter:'currency:"$":0'},{name:"Estado",field:"estado"}];vm.gridOptionsPendingDocs={paginationPageSizes:[10,25,50,75],paginationPageSize:10,columnDefs:columnDefs};GameAccount.getDataGrid($rootScope.id,$rootScope.tokenSession,"docPendiente").then(complete).catch(failed);function complete(data){vm.gridOptionsPendingDocs.data=data}function failed(data){}}function getPaidDocs(){var columnDefs=[{name:"Número documento de retiro",field:"numero_fact"},{name:"Fecha",field:"fecha_crea"},{name:"Medio de Pago",field:"medio_pago"},{name:"Valor bruto",field:"valor_bruto",cellFilter:'currency:"$":0'},{name:"Descuento",field:"valor_retencion",cellFilter:'currency:"$":0'},{name:"Valor neto",field:"valor",cellFilter:'currency:"$":0'}];vm.gridOptionsPaidDocs={paginationPageSizes:[10,25,50,75],paginationPageSize:10,columnDefs:columnDefs};GameAccount.getDataGrid($rootScope.id,$rootScope.tokenSession,"docPagado").then(complete).catch(failed);function complete(data){vm.gridOptionsPaidDocs.data=data}function failed(){}}function getCancelDocs(){var columnDefs=[{name:"Número documento de retiro",field:"numero_fact"},{name:"Fecha crea doc.",field:"fecha_crea",width:"25%",minWidth:70},{name:"Fecha cancela doc.",field:"fecha_cancela_doc",width:"25%",minWidth:70},{name:"Valor bruto",field:"valor_bruto",cellFilter:'currency:"$":0'},{name:"Descuento",field:"valor_retencion",cellFilter:'currency:"$":0'},{name:"Valor neto",field:"valor",cellFilter:'currency:"$":0'}];vm.gridOptionsCancelDocs={paginationPageSizes:[10,25,50,75],paginationPageSize:10,columnDefs:columnDefs};GameAccount.getDataGrid($rootScope.id,$rootScope.tokenSession,"docCancel").then(complete).catch(failed);function complete(data){vm.gridOptionsCancelDocs.data=data}function failed(){}}function getIncome(){var columnDefs=[{name:"Ajuste",field:"descripcion"},{name:"Valor",field:"valor",cellFilter:'currency:"$":0'},{name:"Fecha",field:"fecha_crea"},{name:"Observación",field:"observ"}];vm.gridOptionsIncome={paginationPageSizes:[10,25,50,75],paginationPageSize:10,columnDefs:columnDefs};GameAccount.getDataGrid($rootScope.id,$rootScope.tokenSession,"ajusteEntrada").then(complete).catch(failed);function complete(data){vm.gridOptionsIncome.data=data}function failed(){}}function getOutcome(){var columnDefs=[{name:"Ajuste",field:"descripcion"},{name:"Valor",field:"valor",cellFilter:'currency:"$":0'},{name:"Fecha",field:"fecha_crea"},{headerName:"Observación",field:"observ"}];vm.gridOptionsOutcome={paginationPageSizes:[10,25,50,75],paginationPageSize:10,columnDefs:columnDefs};GameAccount.getDataGrid($rootScope.id,$rootScope.tokenSession,"ajusteSalida").then(complete).catch(failed);function complete(data){vm.gridOptionsOutcome.data=data}function failed(){}}function getBalanceDetail(){var columnDefs=[{name:"+ Depositos",field:"recargas",cellFilter:'currency:"$":0'},{name:"- Apuestas",field:"apuestas",cellFilter:'currency:"$":0'},{name:"+ Premios",field:"premios",cellFilter:'currency:"$":0'},{name:"- Doc. de retiro Pendientes",field:"notas_pendiente",cellFilter:'currency:"$":0'},{name:"- Doc. de Retiro Pagadas",field:"notas_pagadas",cellFilter:'currency:"$":0'},{name:"+ Ajustes por entrada",field:"ajuste_entrada",cellFilter:'currency:"$":0'},{name:"- Ajustes por Salidas",field:"ajuste_salida",cellFilter:'currency:"$":0'},{name:"Total",field:"total",cellFilter:'currency:"$":0'}];vm.gridOptionsBalanceDetail={columnDefs:columnDefs};GameAccount.getDataGrid($rootScope.id,$rootScope.tokenSession,"saldoDiscriminado").then(complete).catch(failed);function complete(data){vm.gridOptionsBalanceDetail.data=data}function failed(){}}}})();
(function(window,document){'use strict';var Hamster=function(element){return new Hamster.Instance(element);};Hamster.SUPPORT='wheel';Hamster.ADD_EVENT='addEventListener';Hamster.REMOVE_EVENT='removeEventListener';Hamster.PREFIX='';Hamster.READY=false;Hamster.Instance=function(element){if(!Hamster.READY){Hamster.normalise.browser();Hamster.READY=true;}this.element=element;this.handlers=[];return this;};Hamster.Instance.prototype={wheel:function onEvent(handler,useCapture){Hamster.event.add(this,Hamster.SUPPORT,handler,useCapture);if(Hamster.SUPPORT==='DOMMouseScroll'){Hamster.event.add(this,'MozMousePixelScroll',handler,useCapture);}return this;},unwheel:function offEvent(handler,useCapture){if(handler===undefined&&(handler=this.handlers.slice(-1)[0])){handler=handler.original;}Hamster.event.remove(this,Hamster.SUPPORT,handler,useCapture);if(Hamster.SUPPORT==='DOMMouseScroll'){Hamster.event.remove(this,'MozMousePixelScroll',handler,useCapture);}return this;}};Hamster.event={add:function add(hamster,eventName,handler,useCapture){var originalHandler=handler;handler=function(originalEvent){if(!originalEvent){originalEvent=window.event;}var event=Hamster.normalise.event(originalEvent),delta=Hamster.normalise.delta(originalEvent);return originalHandler(event,delta[0],delta[1],delta[2]);};hamster.element[Hamster.ADD_EVENT](Hamster.PREFIX+eventName,handler,useCapture||false);hamster.handlers.push({original:originalHandler,normalised:handler});},remove:function remove(hamster,eventName,handler,useCapture){var originalHandler=handler,lookup={},handlers;for(var i=0,len=hamster.handlers.length;i<len;++i){lookup[hamster.handlers[i].original]=hamster.handlers[i];}handlers=lookup[originalHandler];handler=handlers.normalised;hamster.element[Hamster.REMOVE_EVENT](Hamster.PREFIX+eventName,handler,useCapture||false);for(var h in hamster.handlers){if(hamster.handlers[h]==handlers){hamster.handlers.splice(h,1);break;}}}};var lowestDelta,lowestDeltaXY;Hamster.normalise={browser:function normaliseBrowser(){if(!('onwheel'in document||document.documentMode>=9)){Hamster.SUPPORT=document.onmousewheel!==undefined?'mousewheel':'DOMMouseScroll';}if(!window.addEventListener){Hamster.ADD_EVENT='attachEvent';Hamster.REMOVE_EVENT='detachEvent';Hamster.PREFIX='on';}},event:function normaliseEvent(originalEvent){var event={originalEvent:originalEvent,target:originalEvent.target||originalEvent.srcElement,type:'wheel',deltaMode:originalEvent.type==='MozMousePixelScroll'?0:1,deltaX:0,delatZ:0,preventDefault:function(){if(originalEvent.preventDefault){originalEvent.preventDefault();}else{originalEvent.returnValue=false;}},stopPropagation:function(){if(originalEvent.stopPropagation){originalEvent.stopPropagation();}else{originalEvent.cancelBubble=false;}}};if(originalEvent.wheelDelta){event.deltaY=-1/40*originalEvent.wheelDelta;}if(originalEvent.wheelDeltaX){event.deltaX=-1/40*originalEvent.wheelDeltaX;}if(originalEvent.detail){event.deltaY=originalEvent.detail;}return event;},delta:function normaliseDelta(originalEvent){var delta=0,deltaX=0,deltaY=0,absDelta=0,absDeltaXY=0,fn;if(originalEvent.deltaY){deltaY=originalEvent.deltaY*-1;delta=deltaY;}if(originalEvent.deltaX){deltaX=originalEvent.deltaX;delta=deltaX*-1;}if(originalEvent.wheelDelta){delta=originalEvent.wheelDelta;}if(originalEvent.wheelDeltaY){deltaY=originalEvent.wheelDeltaY;}if(originalEvent.wheelDeltaX){deltaX=originalEvent.wheelDeltaX*-1;}if(originalEvent.detail){delta=originalEvent.detail*-1;}if(delta===0){return[0,0,0];}absDelta=Math.abs(delta);if(!lowestDelta||absDelta<lowestDelta){lowestDelta=absDelta;}absDeltaXY=Math.max(Math.abs(deltaY),Math.abs(deltaX));if(!lowestDeltaXY||absDeltaXY<lowestDeltaXY){lowestDeltaXY=absDeltaXY;}fn=delta>0?'floor':'ceil';delta=Math[fn](delta/lowestDelta);deltaX=Math[fn](deltaX/lowestDeltaXY);deltaY=Math[fn](deltaY/lowestDeltaXY);return[delta,deltaX,deltaY];}};if(typeof window.define==='function'&&window.define.amd){window.define('hamster',[],function(){return Hamster;});}else if(typeof exports==='object'){module.exports=Hamster;}else{window.Hamster=Hamster;}})(window,window.document);